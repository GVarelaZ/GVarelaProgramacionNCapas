@model ML.Usuario

@{
    ViewBag.Title = "Form";
    Layout = "~/Views/Shared/_Layout.cshtml";

}
<script>
    var UrlEstados = "@Url.Action("MunicipioGetByIdEstado", "Usuario")?idEstado="
    var UrlMunicipio = "@Url.Action("ColoniaGetByIdMunicipio", "Usuario")?idMunicipio="
</script>

    <script src="~/Scripts/jquery-3.7.0.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.14.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" src="/resources/demos/style.css">
    <script src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"></script>
    <script src="~/Scripts/Usuario/Validaciones.js"></script>
    <style>
        body {
            background-image: url("https://cdn.pixabay.com/photo/2015/06/20/07/24/color-815552_640.png");
            background-size: cover;
        }

        .avatar {
            border-radius: 30%;
            object-fit: cover;
            object-position: center;
            height: 200px;
            width: 200px;
        }
    </style>

    <h2 style="font-style: oblique; color:white; font-size:50px;" class="text-decoration-underline fw-bold text-lg-center">FORMULARIO PARA NUEVOS REGISTROS</h2>
    <p class="p-2"></p>

    @using (Html.BeginForm("Form", "Usuario", FormMethod.Post, new { @enctype = "multipart/form-data", @onSubmit = "validarFormulario(event)" }))
    {
        @Html.HiddenFor(Model => Model.idUsuario)
        @Html.HiddenFor(Model => Model.Direccion.IdDireccion)
        @Html.HiddenFor(Model => Model.Imagen)

        <div class="container">
            <div class=" col-md-6">
                <h3 style="font-style:italic; color:white;" class="text-decoration-underline fw-bold text-lg-start">Datos personales</h3>
            </div>
            <div class="card mx-auto p-3 border border-dark border border-4 rounded-5">
                <div class="row g-2">
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.Nombre, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(Model => Model.Nombre, new
                   {
                            @id = "nombre",
                       @class = "form-control rounded-pill",
                       @style = "border-width:3px",
                       @onKeypress = "validarCampo(event)",
                            @onBlur = "campoVacio(event)"
                   })
                        <span class="notificacion"></span>
                    </div>
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.ApellidoPaterno, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(Model => Model.ApellidoPaterno, new
                   {
                            @id = "apellidoPaterno",
                       @class = "form-control rounded-pill",
                       @style = "border-width:3px",
                       @onKeypress = "validarCampo(event)",
                       @onBlur = "campoVacio(event)"
                   })
                        <span class="notificacion"></span>
                    </div>
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.ApellidoMaterno, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(Model => Model.ApellidoMaterno, new
                   {
                       @id = "apellidoMaterno",
                       @class = "form-control rounded-pill",
                       @style = "border-width:3px",
                       @onKeypress = "validarCampo(event)",
                       @onBlur = "campoVacio(event)"
                   })
                        <span class="notificacion"></span>
                    </div>
                    <div class="col-md-4 ">
                        @Html.LabelFor(Model => Model.Sexo, new { @class = "control-label fw-bold" })
                        <p></p>
                        @if (Model.Sexo != null)
                        {
                            if (Model.Sexo == "H ")
                            {
                                <div class="form-check form-check-inline">
                                    @Html.Label("Hombre", new { @class = " control-label fw-bold" })
                                    @Html.RadioButtonFor(Model => Model.Sexo, "H", new { @class = "form-check form-check-input", @checked = "true" })
                                </div>
                                <div class="form-check form-check-inline">
                                    @Html.Label("Mujer", new { @class = "control-label fw-bold" })
                                    @Html.RadioButtonFor(Model => Model.Sexo, "M", new { @class = "form-check form-check-input" })
                                </div>
                            }
                            else
                            {
                                <div class="form-check form-check-inline">
                                    @Html.Label("Hombre", new { @class = "control-label fw-bold" })
                                    @Html.RadioButtonFor(Model => Model.Sexo, "H", new { @class = "form-check form-check-input" })
                                </div>
                                <div class="form-check form-check-inline">
                                    @Html.Label("Mujer", new { @class = "control-label fw-bold" })
                                    @Html.RadioButtonFor(Model => Model.Sexo, "M", new { @class = "form-check form-check-input", @checked = "true" })
                                </div>
                            }
                        }
                        else
                        {

                            <div class="form-check form-check-inline">
                                @Html.Label("  Hombre", new { @class = "control-label fw-bold" })
                                @Html.RadioButtonFor(Model => Model.Sexo, "H", new { @class = "form-check form-check-input" })
                            </div>
                            <div class="form-check form-check-inline">
                                @Html.Label("  Mujer", new { @class = "control-label fw-bold" })
                                @Html.RadioButtonFor(Model => Model.Sexo, "M", new { @class = "form-check form-check-input" })
                            </div>
                        }
                    </div>
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.Telefono, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(Model => Model.Telefono, new
                   {
                       @id = "telefono",
                       @maxlength = "10",
                       @class = "form-control rounded-pill",
                       @style = "border-width:3px",
                       @onKeypress = "validarNumeros(event)",
                       @onBlur = "campoVacio(event)"
                   })
                        <span class="notificacion"></span>
                    </div>
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.FechaNacimiento, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(Model => Model.FechaNacimiento, new
                   {
                       @style = "border-width:3px",
                       @class = "form-select rounded-pill",
                       @type = "text",
                       @id = "datepicker",
                       @onChange = "cambiarColor(event)",
                            @onBlur = "campoVacio(event)"
                   })
                    </div>
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.Celular, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(Model => Model.Celular, new
                   {
                       @id = "celular",
                       @maxlength = "10",
                       @class = "form-control rounded-pill",
                       @style = "border-width:3px",
                       @onKeypress = "validarNumeros(event)",
                       @onBlur = "campoVacio(event)"
                   })
                        <span class="notificacion"></span>
                    </div>
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.Rol, new { @class = "control-label fw-bold" })
                        @Html.DropDownListFor(Model => Model.Rol.IdRol, new SelectList(Model.Rol.Roles, "IdRol", "Nombre"), "Seleccione una opcion", new
                   { @style = "border-width:3px", @class = "form-select rounded-pill", @onChange = "cambiarColor(event)" })
                    </div>
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.Curp, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(m => m.Curp, new
                   {
                       @id = "curp_input",
                       @class = "form-control rounded-pill",
                       @style = "border-width:3px",
                       @oninput = "validarInput(this)",
                       @onBlur = "campoVacio(event)"
                   })
                        <span id="resultado" class="notificacion"></span>
                    </div>
                </div>
            </div>
            <p class="p-2"></p>
            <h3 style="color:white;" class="text-decoration-underline fw-bold text-lg-start">Direccion</h3>
            <div class="card mx-auto p-3 border border-dark border border-4 rounded-5">
                <div class="row g-2">
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.Direccion.Calle, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(Model => Model.Direccion.Calle, new
                   {
                       @id = "calle",
                       @class = "form-control rounded-pill",
                       @style = "border-width:3px",
                       @onKeypress = "validarCampo(event)",
                       @onBlur = "campoVacio(event)"
                   })
                        <span class="notificacion"></span>
                    </div>
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.Direccion.NumeroExterior, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(Model => Model.Direccion.NumeroExterior, new
                   {
                       @id = "numeroExterior",
                       @maxlength = "5",
                       @class = "form-control rounded-pill",
                       @style = "border-width:3px",
                       @onKeypress = "validarNumeros(event)",
                       @onBlur = "campoVacio(event)"
                   })
                        <span class="notificacion"></span>
                    </div>
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.Direccion.NumeroInterior, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(Model => Model.Direccion.NumeroInterior, new
                   {
                       @id = "numeroInterior",
                       @maxlength = "5",
                       @class = "form-control rounded-pill",
                       @style = "border-width:3px",
                       @onKeypress = "validarNumeros(event)",
                       @onBlur = "campoVacio(event)"
                   })
                        <span class="notificacion"></span>
                    </div>
                    <div class="col-md-4">
                        @Html.Label("Estado", new { @class = "control-label fw-bold" })
                        @Html.DropDownListFor(Model => Model.Direccion.Colonia.Municipio.Estado.IdEstado, new SelectList(
                       Model.Direccion.Colonia.Municipio.Estado.Estados, "IdEstado", "Nombre"), "Selecciona un estado", new
                       {
                           @id = "ddlEstado",
                           @class = "form-select rounded-pill",
                           @style = "border-width:3px",
                           onChange = "MunicipioGetByIdEstado(), cambiarColor(event)"
                       })
                    </div>
                    @if (Model.Direccion.Colonia.Municipio.Municipios != null || Model.Direccion.Colonia.Municipio.Municipios.Count > 0)
                    {
                        <div class="col-md-4">
                            @Html.Label("Municipio", new { @class = "control-label fw-bold" })
                            @Html.DropDownListFor(Model => Model.Direccion.Colonia.Municipio.IdMunicipio, new SelectList(
                            Model.Direccion.Colonia.Municipio.Municipios, "IdMunicipio", "Nombre"), "Selecciona un municipio", new
                            {
                                @id = "ddlMunicipio",
                                @class = "form-select rounded-pill",
                                @style = "border-width:3px",
                                @onChange = "ColoniaGetByIdMunicipio(), cambiarColor(event)"
                            })
                        </div>
                    }
                    else
                    {
                        <div class="col-md-4">
                            @Html.Label("Municipio", new { @class = "control-label fw-bold" })
                            @Html.DropDownListFor(Model => Model.Direccion.Colonia.Municipio.IdMunicipio, new SelectList(
                           String.Empty), "Selecciona un municipio", new
                           {
                               @id = "ddlMunicipio",
                               @class = "form-select rounded-pill",
                               @style = "border-width:3px",
                               @onChange = "ColoniaGetByIdMunicipio(), cambiarColor(event)"
                           })
                        </div>

                    }
                    @if (Model.Direccion.Colonia.Colonias != null || Model.Direccion.Colonia.Colonias.Count > 0)
                    {
                        <div class="col-md-4">
                            @Html.Label("Colonia", new { @class = "control-label fw-bold" })
                            @Html.DropDownListFor(Model => Model.Direccion.Colonia.IdColonia, new SelectList(
                            Model.Direccion.Colonia.Colonias, "IdColonia", "Nombre"), "Selecciona una colonia", new
                            {
                                @id = "ddlColonia",
                                @class = "form-select rounded-pill",
                                @style = "border-width:3px",
                                     @onChange = "cambiarColor(event)"

                            })
                        </div>
                    }
                    else
                    {
                        <div class="col-md-4">
                            @Html.Label("Colonia", new { @class = "control-label fw-bold" })
                            @Html.DropDownListFor(Model => Model.Direccion.Colonia.IdColonia, new SelectList(
                           String.Empty), "Selecciona una colonia", new
                           {
                               @id = "ddlColonia",
                               @class = "form-select rounded-pill",
                               @style = "border-width:3px",
                               @onChange = "cambiarColor(event)"

                           })
                        </div>

                    }
                </div>
            </div>
            <p class="p-2"></p>
            <h3 style="color:white;" class="text-decoration-underline fw-bold text-lg-start">Datos inicio de sesion</h3>
            <div class="card mx-auto p-3 border border-dark border border-4 rounded-5">
                <div class="row g-2">
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.Email, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(m => m.Email, new
                   {
                       @type = "text",
                       @id = "emailInput",
                       @class = "form-control rounded-pill",
                       @style = "border-width:3px",
                       @onBlur = "validarEmail(event), campoVacio(event)"
                   })
                        <span class="notificacion"></span>
                    </div>
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.UserName, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(Model => Model.UserName, new
                   {
                       @id = "UserName",
                       @class = "form-control rounded-pill",
                       @style = "border-width:3px",
                       @onKeypress = "userNameValid(event)",
                       @onBlur = "campoVacio(event) campoVacio(event)"
                   })
                        <span class="notificacion"></span>
                    </div>
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.Password, new { @class = "control-label fw-bold" })
                        @Html.TextBoxFor(Model => Model.Password, new
                   {
                       @id = "inptContraseña",
                       @Type = "password",
                       @class = "form-control rounded-pill",
                       @style = "border-width:3px",
                       @onBlur = "validarPassword(event), campoVacio(event)"
                   })
                        <span class="notificacion"></span>
                    </div>
                    <div class="col-md-4">
                        @Html.LabelFor(Model => Model.Imagen, new { @class = "control-label fw-bold" })

                        <input name="imagenCargada" id="imagenInput" type="file" class="form-control rounded-pill" style="border-width:3px"
                               onChange="ValidarImagen(), cambiarColor(event)" />
                    </div>
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <label class="control-label fw-bold">Confirmar password</label>
                        <input Type="password" class="form-control rounded-pill" style="border-width:3px" onblur="contraseñasIguales(this), campoVacio(event)" id="inptValidar" />
                        <span class="notificacion"></span>
                    </div>
                    <div class="col-md-12 text-md-center">
                        @if (Model.Imagen == null)
                        {
                            <img id="fotoPerfil" class="avatar" src="https://img.freepik.com/vector-gratis/avatar-personaje-empresario-aislado_24877-60111.jpg?t=st=1740679301~exp=1740682901~hmac=8d0df42d89f7a73d080b188cd7449336b9e10547b4c3751fa72055ae09087bf3&w=740"
                                 width="60px" height="60px">
                        }
                        else
                        {
                            <img id="fotoPerfil" src="data:image/*;base64,@Convert.ToBase64String(Model.Imagen)" class="avatar" alt="Sin foto"
                                 width="60px" height="60px">
                        }
                    </div>
                    <div class="col-12 text-end">
                        <button class=" btn btn-success fw-bold btn-lg text-center" type="submit">Registrar</button>
                    </div>
                </div>
            </div>
        </div>
    }
